let urlParams=new URLSearchParams(window.location.search);const API_URL="https://travel-advisor.p.rapidapi.com/",travelAdvisorHost="travel-advisor.p.rapidapi.com",travelAdvisorKey="1a90fa908dmsh68c2ea5a219f7bap1540d6jsnbe88f669414e";let initList=e=>{let t=document.getElementById("hotel-list");e.forEach(e=>{let a=document.createElement("a");a.setAttribute("href","detail.html?id="+e.result_object.location_id),t.appendChild(a);let s=document.createElement("div");s.setAttribute("class","hotel"),a.appendChild(s);let i="<img src="+e.result_object.photo.images.medium.url+" alt='"+e.result_object.name+"' class='hotel-image-small'/>";s.innerHTML=i;let l=document.createElement("div");l.setAttribute("class","hotel-name-rating"),s.appendChild(l),e.result_object.name.split(" ").length>3?(l.innerHTML="<h4>"+e.result_object.name+"</h4>",l.innerHTML+="<div id='rating'>"+e.result_object.rating+" <span class='fa fa-star checked'></span></div>",l.innerHTML+="<p style='font-size: small'>"+e.result_object.address+"</p>"):(l.innerHTML="<h3>"+e.result_object.name+"</h3>",l.innerHTML+="<div id='rating'>"+e.result_object.rating+" <span class='fa fa-star checked'></span></div>",l.innerHTML+="<p>"+e.result_object.address+"</p>")})},fetchHotelListAPI=()=>{let e=new XMLHttpRequest;e.addEventListener("readystatechange",function(){if(this.readyState===this.DONE){let e=JSON.parse(this.responseText).data,t=[];hotelList=e.filter(e=>"lodging"==e.result_type),hotelList.forEach(e=>{t.push([e.result_object.name+'<br><a href="detail.html?id='+e.result_object.location_id+'">Book Hotel</a>',e.result_object.latitude,e.result_object.longitude])}),initList(hotelList),initMap(t),disableLoader()}}),e.open("GET",API_URL+"locations/search?lang=en_US&limit=100&query="+urlParams.get("city")),e.setRequestHeader("x-rapidapi-host",travelAdvisorHost),e.setRequestHeader("x-rapidapi-key",travelAdvisorKey),e.send()};fetchHotelListAPI();